(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{3111:(e,t,r)=>{"use strict";r.d(t,{FilterProvider:()=>n,R:()=>l});var s=r(5155),a=r(2115);let i=(0,a.createContext)(void 0);function n({children:e}){let[t,r]=(0,a.useState)({});return(0,s.jsx)(i.Provider,{value:{filters:t,setFilters:e=>r(e),updateFilter:e=>r(t=>({...t,...e})),resetFilters:()=>r({})},children:e})}function l(){let e=(0,a.useContext)(i);if(!e)throw Error("useFilters must be used within a FilterProvider");return e}},3321:(e,t,r)=>{"use strict";var s=r(4645);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},5432:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(5155),a=r(8500),i=r.n(a);function n({title:e,value:t,className:r="",href:a}){let n=a?i():"div";return(0,s.jsxs)(n,{href:a||"#",onClick:a?void 0:()=>{void 0!==a&&(a||alert("\uD83D\uDEA7 Feature in progress..."))},className:`block p-5  text-lg 
        rounded-xl shadow-xl font-semibold
        bg-sidebarLight dark:bg-sidebarDark
        text-navTextLight dark:text-navTextDark
        transition 
        cursor-pointer select-none ${r}`,children:[(0,s.jsx)("span",{className:"text-xl font-bold mb-1",children:e}),(0,s.jsx)("span",{className:"text-4xl font-bold",children:t})]})}},7101:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155);function a(){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 ",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-blue-500"}),(0,s.jsx)("div",{className:"mt-4 text-gray-500 font-bold text-xl",children:"Loading..."})]})}r(2115)},8907:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var s=r(5155),a=r(2115),i=r(3321),n=r(9558),l=r(7101),o=r(5432),c=r(3111);function d(){let e=(0,i.useSearchParams)(),t=(0,i.useRouter)(),{filters:r}=(0,c.R)(),[d,u]=(0,a.useState)(null),[h,x]=(0,a.useState)(!0),[m,f]=(0,a.useState)(null),v=parseInt(e.get("page")||"1",10),g=e.get("status")||void 0;if((0,a.useEffect)(()=>{let e=!0;return x(!0),(async()=>{let t={...r};g&&(t.status=g);let s=await (0,n.j)(v,20,t);e&&(u(s),s?.results?.length>0&&f(s.results[0]),x(!1))})(),()=>{e=!1}},[v,20,g,r]),h)return(0,s.jsx)(l.A,{});if(!d)return(0,s.jsx)("div",{className:"p-6",children:"No data available"});let j=r=>{let s=new URLSearchParams(e.toString());s.set("page",r.toString()),t.push(`/dashboard/Overview/certificates?${s.toString()}`)};return(0,s.jsxs)("div",{className:"flex flex-col p-2",children:[m&&(0,s.jsx)(o.default,{title:"Certificate Details",value:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row align-items justify-between p-4 gap-4 text-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Domain:"})," ",m.domain||m.id]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Issuer:"})," ",m.issuer.organization||m.issuer.common_name]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Status:"})," ",m.status]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Valid From:"})," ",m.validity.valid_from]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Valid Upto:"})," ",m.validity.valid_to]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Algorithm:"})," ",m.algorithm]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Country:"})," ",m.country||"N/A"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Key Bits:"})," ",m.public_key.bits||"N/A"]})]})]}),className:"mb-6 w-full"}),(0,s.jsx)("div",{className:"rounded-xl shadow-lg bg-sidebarLight dark:bg-sidebarDark w-full",children:(0,s.jsxs)("table",{className:"min-w-full text-left text-lg",children:[(0,s.jsx)("thead",{className:"sticky -top-2 z-10 bg-navButtonHoverLight dark:bg-navButtonHoverDark font-semibold",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-4",children:"Domain"}),(0,s.jsx)("th",{className:"p-4",children:"Issuer"}),(0,s.jsx)("th",{className:"p-4",children:"Status"}),(0,s.jsx)("th",{className:"p-4",children:"Valid Upto"}),(0,s.jsx)("th",{className:"p-4",children:"Algorithm"})]})}),(0,s.jsx)("tbody",{children:d.results.map((e,t)=>(0,s.jsxs)("tr",{onClick:()=>f(e),className:"cursor-pointer text-navTextLight dark:text-navTextDark hover:bg-navButtonHoverLight dark:hover:bg-navButtonHoverDark transition",children:[(0,s.jsx)("td",{className:"p-4",children:e.domain}),(0,s.jsx)("td",{className:"p-4",children:e.issuer.organization||e.issuer.common_name}),(0,s.jsx)("td",{className:"p-4 capitalize",children:e.status}),(0,s.jsx)("td",{className:"p-4",children:e.validity.valid_to}),(0,s.jsx)("td",{className:"p-4",children:e.algorithm})]},t))})]})}),(0,s.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,s.jsx)("button",{disabled:1===v,onClick:()=>j(v-1),className:"px-4 py-2 rounded bg-gray-700 text-white disabled:opacity-30",children:"Previous"}),(0,s.jsx)("button",{disabled:v>=d.total_pages,onClick:()=>j(v+1),className:"px-4 py-2 rounded bg-gray-700 text-white disabled:opacity-30",children:"Next"})]})]})}},9151:(e,t,r)=>{Promise.resolve().then(r.bind(r,8907))},9558:(e,t,r)=>{"use strict";r.d(t,{j:()=>c,_:()=>o});let s={pakistan:"PK",india:"IN","united states":"US","united kingdom":"GB"};function a(e){let t={};for(let[r,a]of Object.entries(e))if(null!=a&&""!==a){if("country"===r){t.country=s[a.trim().toLowerCase()]||a;continue}t[r]=a}let r=new URLSearchParams(t).toString();return r?`?${r}`:""}let i="http://localhost:8000";async function n(e={}){let t=a(e);console.log(t);let r=`${i}/overview/data${t}`;console.log("Fetching overview from:",r);try{let e=await fetch(r,{cache:"no-store"});if(!e.ok){let t=await e.text();throw console.error("API error:",e.status,t),Error(`API error: ${e.status}`)}return await e.json()}catch(e){throw console.error("Overview fetch failed:",e),e}}async function l(e=1,t=20,r={}){let s=a({...r,page:e,page_size:t}),n=`${i}/overview/certificates${s}`;console.log("Fetching overview from:",n);try{let e=await fetch(n,{cache:"no-store"});if(!e.ok){let t=await e.text();throw console.error("Certificates API error:",e.status,t),Error(`API error: ${e.status}`)}return await e.json()}catch(e){throw console.error("Certificates fetch failed:",e),e}}async function o(e={}){try{return await n(e)}catch{return null}}async function c(e=1,t=20,r={}){try{return await l(e,t,r)}catch{return null}}}},e=>{e.O(0,[500,441,794,358],()=>e(e.s=9151)),_N_E=e.O()}]);