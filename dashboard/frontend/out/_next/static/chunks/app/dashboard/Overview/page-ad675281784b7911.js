(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3111:(e,t,r)=>{"use strict";r.d(t,{FilterProvider:()=>a,R:()=>n});var l=r(5155),i=r(2115);let s=(0,i.createContext)(void 0);function a({children:e}){let[t,r]=(0,i.useState)({});return(0,l.jsx)(s.Provider,{value:{filters:t,setFilters:e=>r(e),updateFilter:e=>r(t=>({...t,...e})),resetFilters:()=>r({})},children:e})}function n(){let e=(0,i.useContext)(s);if(!e)throw Error("useFilters must be used within a FilterProvider");return e}},5432:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var l=r(5155),i=r(8500),s=r.n(i);function a({title:e,value:t,className:r="",href:i}){let a=i?s():"div";return(0,l.jsxs)(a,{href:i||"#",onClick:i?void 0:()=>{void 0!==i&&(i||alert("\uD83D\uDEA7 Feature in progress..."))},className:`block p-5  text-lg 
        rounded-xl shadow-xl font-semibold
        bg-sidebarLight dark:bg-sidebarDark
        text-navTextLight dark:text-navTextDark
        transition 
        cursor-pointer select-none ${r}`,children:[(0,l.jsx)("span",{className:"text-xl font-bold mb-1",children:e}),(0,l.jsx)("span",{className:"text-4xl font-bold",children:t})]})}},6110:(e,t,r)=>{"use strict";r.d(t,{default:()=>v});var l=r(5155),i=r(5432),s=r(8067),a=r(3888),n=r(2115),o=r(3321);a.t1.register(a.Bs,a.m_,a.s$);let c=["#3d60b0ff","#e8a200ff","#EF476F","#55c2e0","#64c678","#b376f7","#fbbe5b","#fa658c"];function u({data:e,labels:t,colors:r,hrefs:i,legendPosition:a="bottom",width:u="100%",height:f=320,options:d={}}){let h=(0,n.useRef)(null),x=(0,o.useRouter)(),v=r&&r.length>0?Array(e.length).fill(null).map((e,t)=>r[t%r.length]):Array(e.length).fill(null).map((e,t)=>c[t%c.length]),g={plugins:{legend:{display:!0,position:a,labels:{color:"#222222",padding:18,boxWidth:20}},tooltip:{callbacks:{label:e=>{let t=e.label||"",r=e.parsed??"";return`${t}: ${r}`}}}},onClick:e=>{if(!h.current)return;let t=h.current.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1);if(t.length){let{index:e}=t[0];(e=>{if(!i)return;let t=i[e];void 0!==t&&(t?x.push(t):alert("\uD83D\uDEA7 Feature in progress..."))})(e)}},...d};return(0,l.jsx)("div",{className:"flex flex-col items-center justify-center",style:{width:u,height:f},children:(0,l.jsx)(s.nu,{ref:h,data:{labels:t||[],datasets:[{data:e||[],backgroundColor:v,borderWidth:2}]},options:g})})}let f=({data:e=[],labels:t=[],colors:r=["#3d60b0ff","#e8a200ff","#EF476F","#55c2e0","#64c678","#b376f7","#fbbe5b","#fa658c"],hrefs:l=[]})=>{let i=Array(t.length).fill(null).map((e,t)=>r[t%r.length]),s=l.length===t.length?l:Array(t.length).fill("");return{data:e,labels:t,colors:i,hrefs:s}};var d=r(3111),h=r(9558),x=r(7101);function v(){let e,{filters:t}=(0,d.R)(),[r,s]=(0,n.useState)(null),[a,o]=(0,n.useState)(!0);if((0,n.useEffect)(()=>{o(!0),(0,h._)(t).then(e=>{s(e),o(!1)}).catch(()=>{s(null),o(!1)})},[t]),a)return(0,l.jsx)("div",{className:"h-full flex items-center justify-center text-gray-500 font-bold text-xl",children:(0,l.jsx)(x.A,{})});if(!r)return(0,l.jsx)("div",{className:"text-red-500 font-bold text-xl",children:"Failed to fetch overview data."});let{summary:c}=r,v=f({data:[Number(c?.active_certificates??0),Number(c?.expiring_soon??0),Number(c?.expired_certificates??0)],labels:["Active Certificates","Expiring Soon","Expired Certificates"]}),g=c?.signature_algorithm_counts||{},b=f({data:Object.values(g).map(e=>Number(e??0)),labels:Object.keys(g)});return(0,l.jsxs)("div",{className:"h-full w-full flex justify-between flex-col py-4 gap-4",children:[(0,l.jsx)("div",{className:"   w-full px-2   grid gap-4   grid-cols-1   sm:grid-cols-1   md:grid-cols-2   lg:grid-cols-3   ",children:(e="/dashboard/Overview/certificates",[{title:"Total Certificates",value:c.total_certificates,href:`${e}`},{title:"Active Certificates",value:c.active_certificates,href:`${e}?status=active`},{title:"Expired Certificates",value:c.expired_certificates,href:`${e}?status=expired`},{title:"Expiring Soon",value:c.expiring_soon,href:`${e}?status=expiring_soon`},{title:"Unique Domains",value:c.unique_domains_count},{title:"Unique Issuers",value:c.unique_issuers_count},{title:"Warnings",value:c.warnings},{title:"Errors",value:c.errors},{title:"Fatals",value:c.fatals}].map((e,t)=>(0,l.jsx)(i.default,{title:e.title,value:e.value,className:"flex flex-col items-start justify-start h-32 hover:bg-navButtonHoverLight dark:hover:bg-navButtonHoverDark",href:e.href},t)))}),(0,l.jsxs)("div",{className:"   w-full px-2   grid gap-6   grid-cols-1   sm:grid-cols-1   md:grid-cols-1   lg:grid-cols-2   ",children:[(0,l.jsx)(i.default,{title:"Certificate Status Distribution",value:(0,l.jsx)(u,{...v}),className:"h-full flex flex-col items-center justify-center"}),(0,l.jsx)(i.default,{title:"Certificate Type Distribution",value:(0,l.jsx)(u,{...b}),className:"h-full flex flex-col items-center justify-center"})]})]})}},7101:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var l=r(5155);function i(){return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center py-10 ",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-blue-500"}),(0,l.jsx)("div",{className:"mt-4 text-gray-500 font-bold text-xl",children:"Loading..."})]})}r(2115)},8288:(e,t,r)=>{Promise.resolve().then(r.bind(r,6110))},9558:(e,t,r)=>{"use strict";r.d(t,{j:()=>c,_:()=>o});let l={pakistan:"PK",india:"IN","united states":"US","united kingdom":"GB"};function i(e){let t={};for(let[r,i]of Object.entries(e))if(null!=i&&""!==i){if("country"===r){t.country=l[i.trim().toLowerCase()]||i;continue}t[r]=i}let r=new URLSearchParams(t).toString();return r?`?${r}`:""}let s="http://localhost:8000";async function a(e={}){let t=i(e);console.log(t);let r=`${s}/overview/data${t}`;console.log("Fetching overview from:",r);try{let e=await fetch(r,{cache:"no-store"});if(!e.ok){let t=await e.text();throw console.error("API error:",e.status,t),Error(`API error: ${e.status}`)}return await e.json()}catch(e){throw console.error("Overview fetch failed:",e),e}}async function n(e=1,t=20,r={}){let l=i({...r,page:e,page_size:t}),a=`${s}/overview/certificates${l}`;console.log("Fetching overview from:",a);try{let e=await fetch(a,{cache:"no-store"});if(!e.ok){let t=await e.text();throw console.error("Certificates API error:",e.status,t),Error(`API error: ${e.status}`)}return await e.json()}catch(e){throw console.error("Certificates fetch failed:",e),e}}async function o(e={}){try{return await a(e)}catch{return null}}async function c(e=1,t=20,r={}){try{return await n(e,t,r)}catch{return null}}}},e=>{e.O(0,[647,500,236,441,794,358],()=>e(e.s=8288)),_N_E=e.O()}]);